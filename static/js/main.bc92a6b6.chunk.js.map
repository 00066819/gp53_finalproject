{"version":3,"sources":["utils/index.js","services/post.js","components/Loading.jsx","pages/Loading.jsx","services/auth.js","context/UserContext.js","components/Banner.jsx","components/Pagination.jsx","hooks/index.js","components/Post.jsx","pages/Dashboard.jsx","pages/Login/Login.jsx","pages/User/User.jsx","pages/NotFound/NotFound.jsx","pages/Post/Post.jsx","pages/Post/OwnedPosts.jsx","pages/Post/CreatePost.jsx","routes/PrivateRoute.jsx","routes/PublicRoute.jsx","App.js","index.js"],"names":["BASE_URL","TOKEN_KEY","isSuperset","set","subset","elem","has","getToken","_","JSON","parse","localStorage","getItem","token","e","request","method","path","body","a","useToken","Error","toUpperCase","headers","Object","keys","length","stringify","fetch","response","json","data","ok","cause","console","error","classes","className","map","x","toString","filter","Boolean","join","children","list","split","getAll","i","get","id","create","title","description","image","update","getOwned","Loading","size","color","loading","LoadingPage","login","username","password","UserContext","React","createContext","rolePermissions","user","Set","admin","UserProvider","props","useReducer","tokenReducer","setToken","useState","setUser","useEffect","verifyTokenAsync","refLogin","useRef","status","refLogout","undefined","value","useMemo","current","logout","permissions","role","Provider","useUserContext","context","useContext","newToken","setItem","Banner","name","navigate","useNavigate","to","onClick","Pagination","setPage","pagesBarClasses","cloneElement","elements","values","pages","range","Math","max","page","min","disabled","useFavorites","favorites","setFavorites","Post","post","updatePost","useLink","style","editing","setEditing","favorited","setFavorited","includes","_id","favoriteHover","setFavoriteHover","favoriteJustToggled","setFavoriteJustToggled","liked","setLiked","likes","find","u","likeHover","setLikeHover","likeJustToggled","setLikeJustToggled","active","setActive","visibilityHover","setVisibilityHover","visibilityJustToggled","setVisibilityJustToggled","As","Link","containerClasses","actionsClasses","view","src","alt","maxHeight","setMouseEffects","dir","editPostPermissions","submitEdit","event","preventDefault","fieldKeys","newFields","getFields","obj","object","key","target","isEqual","transform","inputClasses","editingForm","onSubmit","placeholder","defaultValue","type","rows","toggleValue","setHover","setJustToggled","onMouseEnter","onMouseLeave","Home","location","useLocation","queryStrings","fromEntries","search","slice","postsReducer","load","parseInt","postsState","dispatchPostsAction","payload","Posts","posts","state","action","limit","Login","setUsername","setPassword","setError","onChange","save","onSubmitHandler","logged","User","setPosts","forEach","postID","newPosts","getPost","NotFound","PostPage","useParams","setPost","PostService","updateObj","draft","merge","maxWidth","OwnedPosts","every","produce","postI","findIndex","log","cloneDeep","CreatePost","setTitle","setDescription","setImage","errors","setErrors","defaultErrors","startsWith","PrivateRoute","userPermissions","some","replace","PublicRoute","App","exact","element","myPosts","createPost","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bc92a6b6.chunk.js","sourcesContent":["import get from 'lodash/fp/get';\r\n\r\nconst BASE_URL = 'https://posts-pw2021.herokuapp.com/api/v1';\r\nexport const TOKEN_KEY = \"token\";\r\n\r\nexport function isSuperset(set, subset) {\r\n    for (let elem of subset) {\r\n        if (!set.has(elem)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport const getToken = _ => {\r\n    try {\r\n        return JSON.parse(localStorage.getItem(TOKEN_KEY))?.token || null;\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const request = async (method, path, body, useToken = true) => {\r\n    const token = getToken();\r\n\r\n    if (useToken && !token) { throw new Error('Expected token.'); }\r\n\r\n    try {\r\n        const request = {\r\n            method: method.toUpperCase(),\r\n            headers: {\r\n                \"Content-type\": 'application/json',\r\n                ...useToken && {\"Authorization\": `Bearer ${token}`},\r\n            },\r\n            ...body && Object.keys(body).length && {body: JSON.stringify(body)}\r\n        };\r\n\r\n        const response = await fetch(`${BASE_URL}${path}`, request);\r\n\r\n        const data = await response.json();\r\n\r\n        if (response.ok) {\r\n            return data;\r\n        }\r\n        else {\r\n            throw new Error('An error has occurred', {cause: data});\r\n        }\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n        throw new Error('An error has occurred', {cause: e?.cause || e});\r\n    }\r\n};\r\n\r\nexport const getFrom = (object) => (key) => get(key)(object);\r\n\r\nexport function classes(...classes) {\r\n  return {className: classes.map((x) => x?.toString?.()).filter(Boolean).join(' ')};\r\n}\r\n\r\nclasses.children = (list) => {\r\n  return list.split(' ').map((x) => 'children:' + x).join(' ');\r\n}","import {request} from 'utils';\r\n\r\nconst PAGE_LIMIT = 15;\r\n\r\nexport const getAll = (i = 0) => request('get', `/post/all?limit=${PAGE_LIMIT}&page=${i}`);\r\nexport const get = (id) => request ('get', `/post/one/${id}`);\r\n\r\nexport const create = (title, description, image) => request('post', '/post/create', {title, description, image});\r\nexport const update = (id, title, description, image) => request('put', `/post/update/${id}`, {title, description, image});\r\nexport const toggleActive = (id) => request('patch', `/post/toggle/${id}`);\r\nexport const like = (id) => request ('patch', `/post/like/${id}`);\r\nexport const favorite = (id) => request('patch', `/post/fav/${id}`);\r\nexport const addComment = (id, description) => request('patch', `/post/comment/${id}`, {description});\r\n\r\nexport const getOwned = (i = 0) => request('get', `/post/owned?limit=${PAGE_LIMIT}&page=${i}`);\r\nexport const getFavorites = _ => request('get', '/post/fav');","import {BounceLoader} from 'react-spinners';\r\n\r\nexport default function Loading() {\r\n  return (<BounceLoader size={72} color='orange' loading/>);\r\n}","import Loading from 'components/Loading';\r\n\r\nexport default function LoadingPage() {\r\n  return (\r\n    <div className=\"flex h-screen w-screen justify-center items-center\">\r\n      <Loading/>\r\n    </div>\r\n  );\r\n}","import {request} from 'utils';\r\n\r\nexport const login = (username, password) => request('post', '/auth/signin', {username, password}, false); \r\nexport const verifyToken = _ => request('get', '/auth/whoami');","import React, { useState, useEffect, useMemo, useRef, useReducer } from \"react\";\r\nimport {TOKEN_KEY, getToken} from 'utils';\r\nimport {login, verifyToken} from 'services/auth';\r\n\r\nconst UserContext = React.createContext();\r\n\r\nconst rolePermissions = {\r\n    user: new Set(['post:read']),\r\n    admin: new Set(['post:read', 'admin:read', 'post:create', 'post:update', 'admin:update', 'post:delete']),\r\n}\r\n\r\nexport const UserProvider = (props) => {\r\n    // If a token is saved, wait for the useEffect to set the user.\r\n    const [token, setToken] = useReducer(tokenReducer, getToken());\r\n    const [user, setUser] = useState(getToken() ? 'loading' : null);\r\n\r\n    // If already signed in (AKA, has a token saved in LocalStorage), verify that token and set the user value.\r\n    useEffect(\r\n        _ => {\r\n            if (!token || token === 'loading') { return; }\r\n\r\n            const verifyTokenAsync = async _ => {\r\n                if (token) {\r\n                    try {\r\n                        const user = await verifyToken();\r\n                        setUser(user);\r\n                    }\r\n                    catch (e) {\r\n                        process.env.NODE_ENV === 'development' && console.log(e);\r\n                        setUser(null);\r\n                        setToken(null);\r\n                    }\r\n                }\r\n            }\r\n\r\n            verifyTokenAsync();\r\n        },\r\n        [token]\r\n    );\r\n\r\n    const refLogin = useRef(async (username, password) => {\r\n        let status = false;\r\n        try {\r\n            const { token } = await login(username, password);\r\n\r\n            if (token) {\r\n                setToken(token);\r\n                status = true;\r\n            }\r\n        }\r\n        catch (error) {\r\n            console.error(error);\r\n            console.error(\"Error in login\");\r\n        }\r\n        finally {\r\n            return status;\r\n        }\r\n    });\r\n\r\n    const refLogout = useRef(_ => {\r\n        setUser(undefined);\r\n        setToken(undefined);\r\n    });\r\n\r\n    const value = useMemo(\r\n        _ => ({\r\n            token,\r\n            user,\r\n            login: refLogin.current,\r\n            logout: refLogout.current,\r\n            permissions: user?.role ? rolePermissions[user.role] : null,\r\n        }),\r\n        [token, user]\r\n    );\r\n   \r\n    return <UserContext.Provider {...{value}} {...props}/>;\r\n}\r\n\r\nexport const useUserContext = _ => {\r\n    const context = React.useContext(UserContext);\r\n\r\n    if (!context) {\r\n        throw new Error(\"useUserContext() must be inside of UserProvider\");\r\n    }\r\n\r\n    return context;\r\n}\r\n\r\nfunction tokenReducer(token, newToken) {\r\n    localStorage.setItem(TOKEN_KEY, JSON.stringify({token: newToken}));\r\n    return newToken;\r\n};\r\n","import {Fragment} from 'react';\r\nimport {Link, useNavigate} from 'react-router-dom';\r\n\r\nimport {isSuperset} from 'utils';\r\nimport {useUserContext} from 'context/UserContext';\r\n\r\nexport default function Banner(props) {\r\n  const {name} = props;\r\n\r\n  const navigate = useNavigate();\r\n  const {logout, permissions} = useUserContext();\r\n\r\n  const logoutHandler = () => {\r\n    logout();\r\n    navigate(\"/login\");\r\n  }\r\n\r\n  return (\r\n    <header className=\"sticky\">\r\n      {\r\n        name && \r\n        <div className=\"bg-yellow-500 p-4\">\r\n          <h1 className=\"text-2xl font-extrabold text-gray-900 ml-4\">{name}</h1>\r\n        </div>\r\n      }\r\n      <div className=\"relative h-full flex justify-center items-center bg-yellow-600 shadow\">\r\n        {/*When you're working with buttons that redirect you, it's better to use <Link/> instead of a button and navigate.*/}\r\n        <Link to=\"/dashboard\" className=\"bg-yellow-600 hover:bg-yellow-700 text-gray-900 font-bold py-2 px-4\">Home</Link>\r\n        <Link to=\"/user\" className=\"bg-yellow-600 hover:bg-yellow-700 text-gray-900 font-bold py-2 px-4\">My Account</Link>\r\n        {\r\n          isSuperset(permissions, new Set(['post:update'])) &&\r\n          <Fragment>\r\n            <Link to=\"/my-posts\" className=\"bg-yellow-600 hover:bg-yellow-700 text-gray-900 font-bold py-2 px-4\">My Posts</Link>\r\n            <Link to=\"/create-post\" className=\"bg-yellow-600 hover:bg-yellow-700 text-gray-900 font-bold py-2 px-4\">Create Post</Link>\r\n          </Fragment>\r\n        }\r\n        <button onClick={logoutHandler} className=\"absolute right-2 text-right\"><span className=\"material-icons\">logout</span></button>\r\n      </div>\r\n    </header>\r\n  );\r\n}","import {Fragment, cloneElement, useState} from 'react';\r\nimport range from 'lodash/range';\r\n\r\nimport {classes} from 'utils';\r\n\r\nexport default function Pagination(props) {\r\n  const {data, setPage, children} = props;\r\n\r\n  // console.log(data)\r\n\r\n  const pagesBarClasses = classes(\r\n    'text-center',\r\n    classes.children('p-1 not-last:border-r-2 w-4'),\r\n  );\r\n\r\n  return (\r\n    <Fragment>\r\n      {cloneElement(children, {elements: data.values})}\r\n      {\r\n        data.pages > 1 &&\r\n        <div {...pagesBarClasses}>\r\n          {\r\n            range(\r\n              Math.max(data.page - 4, 0),\r\n              Math.min(Math.max(data.page + 4, 9), data.pages)\r\n            )\r\n            .map(\r\n              (i) => <button key={i} onClick={_ => setPage(i)} disabled={data.page === i} className={data.page === i ? 'bg-secondary' : 'bg-additional'}>{i + 1}</button>\r\n            )\r\n          }\r\n        </div>\r\n      }\r\n    </Fragment>\r\n  );\r\n}","import {useEffect, useState} from 'react';\r\n\r\nimport {getFavorites} from 'services/post';\r\n\r\nexport function useFavorites() {\r\n  const [favorites, setFavorites] = useState(null);\r\n\r\n  useEffect(\r\n    _ => {\r\n      if (favorites) { return; }\r\n      setFavorites('loading');\r\n\r\n      // The !_ => {}() pattern lets a function be defined and called at the same time\r\n      // Since the above pattern is an expression and not a statement, according to react/whatever library, and it gets upset at standalone\r\n      // expressions, you need to void the expression which is a statement\r\n      void !async _ => {\r\n        const favorites = (await getFavorites()).favorites;\r\n        // TODO: Check if component still mounted\r\n        setFavorites(favorites);\r\n      }();\r\n    },\r\n    [favorites]\r\n  );\r\n\r\n  return favorites;\r\n}\r\n","import {Fragment, useState, useEffect} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport isEqual from 'lodash/isEqual';\r\nimport transform from 'lodash/transform';\r\nimport get from 'lodash/fp/get';\r\n\r\nimport {isSuperset, getFrom, classes} from 'utils';\r\nimport {useFavorites} from 'hooks';\r\nimport {useUserContext} from 'context/UserContext';\r\n// import {update, toggleActive, like, favorite} from 'services/post';\r\nimport {update, toggleActive, favorite, like} from 'services/post';\r\n\r\nexport default function Post(props) {\r\n  const {\r\n    post,\r\n    updatePost,\r\n    useLink = false,\r\n    className,\r\n    style,\r\n  } = props;\r\n\r\n  const {user, permissions} = useUserContext();\r\n  const favorites = useFavorites();\r\n\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  // Don't even know how favorite is implemented yet\r\n  const [favorited, setFavorited] = useState(null);\r\n\r\n  useEffect(\r\n    _ => {\r\n      if (!favorites || favorites === 'loading') { return; }\r\n\r\n      setFavorited(favorites.includes(post._id));\r\n    },\r\n    [favorites]\r\n  )\r\n\r\n  const [favoriteHover, setFavoriteHover] = useState(false);\r\n  const [favoriteJustToggled, setFavoriteJustToggled] = useState(false);\r\n\r\n  const [liked, setLiked] = useState(null);\r\n\r\n  useEffect(\r\n    _ => {\r\n      if (!post || post === 'loading') { return; }\r\n\r\n      setLiked(Boolean(post.likes.find((u) => u.username === user.username)));\r\n    },\r\n    [post]\r\n  );\r\n\r\n  const [likeHover, setLikeHover] = useState(false);\r\n  const [likeJustToggled, setLikeJustToggled] = useState(false);\r\n\r\n  // Temporary while PATCH requests (AKA, /post/toggle/:id) throw a CORS error\r\n  const [active, setActive] = useState(post.active);\r\n  useEffect(\r\n    _ => { setActive(post.active); },\r\n    [post.active]\r\n  );\r\n\r\n  const [visibilityHover, setVisibilityHover] = useState(false);\r\n  const [visibilityJustToggled, setVisibilityJustToggled] = useState(false);\r\n\r\n  // --\r\n\r\n  const As = useLink ? Link : 'div';\r\n\r\n  const containerClasses = classes('transition duration-200 relative border-4 border-additional rounded rounded-xl bg-white h-96 hover:shadow-2xl');\r\n\r\n  const actionsClasses = classes(\r\n    'flex-row absolute m-2 leading-none bottom-0',\r\n\r\n    // buttons\r\n    classes.children('transition duration-200 bg-gray-300 text-black not-last:mr-1 rounded p-1 hover:bg-yellow-500 active:bg-secondary-light'),\r\n  );\r\n\r\n  const view = <Fragment>\r\n    <As {...useLink && {to: `/post/${post._id}`}} className=\"flex flex-col\">\r\n      <h3 className=\"text-xl font-extrabold text-center text-gray-800\">{post.title}</h3>\r\n      <img src={post.image} alt={`Post ${post._id}`} className=\"my-2 m-auto object-contain\" style={{maxHeight: '200px'}}/>\r\n      <p className=\"text-center\">{post.description}</p>\r\n    </As>\r\n    <div {...classes(actionsClasses.className, 'left-0')}>\r\n      <button\r\n        className=\"material-icons\"\r\n        {...setMouseEffects(\r\n          async _ => {\r\n            try {\r\n              await like(post._id);\r\n              setLiked((x) => !x);\r\n            }\r\n            catch (error) {\r\n              console.dir(error);\r\n            }\r\n          },\r\n          setLikeHover,\r\n          setLikeJustToggled\r\n        )}\r\n        >\r\n        {liked ^ (likeHover && !likeJustToggled) ? 'favorite' : 'favorite_outline'}\r\n      </button>\r\n      <button\r\n        className=\"material-icons\"\r\n        {...setMouseEffects(\r\n          async _ => {\r\n            try {\r\n              await favorite(post._id);\r\n              setFavorited((x) => !x);\r\n            }\r\n            catch (error) {\r\n              console.dir(error);\r\n            }\r\n          },\r\n          setFavoriteHover,\r\n          setFavoriteJustToggled\r\n        )}\r\n        >\r\n        {favorited ^ (favoriteHover && !favoriteJustToggled) ? 'star' : 'star_outline'}\r\n      </button>\r\n    </div>\r\n    {\r\n      updatePost && isSuperset(permissions, editPostPermissions) &&\r\n      <div {...classes(actionsClasses.className, 'right-0')}>\r\n        <button className=\"material-icons\" onClick={_ => setEditing(true)}>\r\n          edit\r\n        </button>\r\n        <button\r\n          className=\"material-icons\"\r\n          {...setMouseEffects(\r\n            async _ => {\r\n              try {\r\n                await toggleActive(post._id);\r\n                setActive((x) => !x);\r\n              }\r\n              catch (error) {\r\n                console.dir(error);\r\n              }\r\n            },\r\n            setVisibilityHover,\r\n            setVisibilityJustToggled\r\n          )}\r\n          >\r\n          {active ^ (visibilityHover && !visibilityJustToggled) ? 'visibility' : 'visibility_off'}\r\n        </button>\r\n      </div>\r\n    }\r\n  </Fragment>;\r\n  \r\n  const submitEdit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const fieldKeys = ['title', 'description', 'image'];\r\n    const getFields = (obj) => fieldKeys.map(getFrom(obj));\r\n    const newFields = getFields(event.target).map(get('value'));\r\n\r\n    const areChanges = !isEqual(\r\n      newFields,\r\n      getFields(post)\r\n    );\r\n\r\n    if (areChanges) {\r\n      try {\r\n        await update(post._id, ...newFields);\r\n        updatePost(post._id, transform(fieldKeys, (obj, key, i) => obj[key] = newFields[i], {}));\r\n        setEditing(false);\r\n      }\r\n      catch (e) {\r\n        console.error(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const inputClasses = classes('bg-gray-200 rounded not-last:mb-2 p-1');\r\n\r\n  const editingForm = <form onSubmit={submitEdit} className=\"flex flex-col\">\r\n    <input name=\"title\" placeholder=\"Title\" defaultValue={post.title} type=\"text\" {...inputClasses}/>\r\n    <input name=\"image\" placeholder=\"Image URL\" defaultValue={post.image} type=\"text\" {...inputClasses}/>\r\n    <textarea name=\"description\" placeholder=\"Description\" defaultValue={post.description} rows={4} {...inputClasses}/>\r\n    <div {...classes(actionsClasses.className, 'right-0')}>\r\n      <button className=\"material-icons\" onClick={_ => setEditing(false)}>\r\n        cancel\r\n      </button>\r\n      <button className=\"material-icons\" type=\"submit\">\r\n        check\r\n      </button>\r\n    </div>\r\n  </form>;\r\n\r\n  return (<div {...classes(className, containerClasses.className)} {...{style}}>{editing ? editingForm : view}</div>);\r\n}\r\n\r\nconst setMouseEffects = (toggleValue, setHover, setJustToggled) => ({\r\n  onClick() {\r\n    toggleValue();\r\n    setJustToggled(true);\r\n  },\r\n  onMouseEnter() { setHover(true); },\r\n  onMouseLeave() {\r\n    setHover(false);\r\n    setJustToggled(false);\r\n  },\r\n})\r\n\r\nconst editPostPermissions = new Set(['post:update']);","import {useEffect, useReducer} from 'react';\r\nimport {useLocation, useNavigate} from 'react-router-dom';\r\nimport {getAll} from 'services/post';\r\n\r\nimport Loading from 'pages/Loading';\r\nimport Banner from 'components/Banner';\r\nimport Pagination from 'components/Pagination';\r\nimport Post from 'components/Post';\r\n\r\nexport default function Home(props) {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const queryStrings = Object.fromEntries(location.search.slice(1).split('&').map((x) => x.split('=')));\r\n\r\n  const [postsState, dispatchPostsAction] = useReducer(\r\n    postsReducer,\r\n    {\r\n      load: queryStrings.page && parseInt(queryStrings.page) ? parseInt(queryStrings.page) - 1 : 0\r\n    }\r\n  );\r\n\r\n  useEffect(\r\n    _ => {\r\n      if (postsState && postsState !== 'loading' && 'load' in postsState) {\r\n        dispatchPostsAction({type: 'loading'});\r\n\r\n        void !async _ => {\r\n          dispatchPostsAction({type: 'load', payload: await getAll(postsState.load)});\r\n        }();\r\n\r\n        return;\r\n      }\r\n\r\n      if (postsState) { return; }\r\n\r\n      dispatchPostsAction({type: 'loading'});\r\n      \r\n      // The !_ => {}() pattern lets a function be defined and called at the same time\r\n      // Since the above pattern is an expression and not a statement, according to react/whatever library, and it gets upset at standalone\r\n      // expressions, you need to void the expression which is a statement\r\n      void !async _ => {\r\n        try {\r\n          dispatchPostsAction({type: 'load', payload: await getAll()});\r\n        }\r\n        catch (e) {\r\n          // handle your error here;\r\n          dispatchPostsAction({type: 'error', payload: e});\r\n        }\r\n      }();\r\n    },\r\n    [postsState]\r\n  );\r\n\r\n  if (!postsState || postsState === 'loading') {\r\n    return (<Loading/>);\r\n  }\r\n\r\n  return (\r\n    <section className=\"justify-around items-center min-h-screen bg-gray-300\">\r\n      <Banner/>\r\n      <Pagination\r\n        data={postsState}\r\n        setPage={(i) => {\r\n          navigate(`/dashboard?page=${i+1}`);\r\n          dispatchPostsAction({type: 'page', payload: {i}});\r\n        }}\r\n        >\r\n        <Posts/>\r\n      </Pagination>\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction Posts(props) {\r\n  const {elements: posts} = props;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-3 gap-4 p-8\">\r\n      {\r\n        posts?.map(\r\n          (post) => <Post key={post._id} {...{post}} useLink={true}/>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction postsReducer(state, action) {\r\n  const {type, payload} = action;\r\n\r\n  if (type === 'load') {\r\n    const {data: values, limit, page, pages} = payload;\r\n    return {values, limit, page, pages};\r\n  }\r\n  else if (type === 'loading') {\r\n    return 'loading';\r\n  }\r\n  else if (type === 'error') {\r\n    return {error: payload};\r\n  }\r\n  else if (type === 'page') {\r\n    return {load: payload.i};\r\n  }\r\n  else { return state; }\r\n}","import { useState } from 'react';\r\n\r\nimport { useUserContext } from '../../context/UserContext';\r\n\r\nexport default function Login() {\r\n    const {login} = useUserContext();\r\n\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const [error, setError] = useState(false);\r\n\r\n    const onChange = (e, save) => {\r\n        save(e.target.value);\r\n    }\r\n\r\n    const onSubmitHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        let logged;\r\n        try {\r\n            logged = await login(username, password);\r\n        }\r\n        catch(e) {\r\n            setError(!logged);\r\n            setUsername('');\r\n            setPassword('');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex justify-center items-center min-h-screen bg-login-img bg-cover\">\r\n            <main className=\"w-1/2 max-w-sm bg-gray-900 rounded-md p-8 md:p-10 shadow-md\">\r\n                <form onSubmit={onSubmitHandler} className=\"flex flex-col gap-4 items-center justify-center\">\r\n                    <h2 className=\"uppercase text-primary font-medium font-roboto font-black text-4xl mb-4\">Posts App</h2>\r\n\r\n                    {error && <p className=\"w-full rounded p-3 text-center text-white font-roboto bg-red-700 select-none\">\r\n                        An error occurred. Please try again.\r\n                    </p>}\r\n\r\n                    <input className=\"font-medium bg-gray-700 w-full text-yellow-500 focus:outline-none focus:ring p-2 rounded\"\r\n                        type='text'\r\n                        value={username}\r\n                        placeholder='Username'\r\n                        onChange={(e) => onChange(e, setUsername)}\r\n                    />\r\n\r\n                    <input className=\"font-medium bg-gray-700 w-full text-yellow-500 focus:outline-none focus:ring p-2 rounded\"\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                        onChange={(e) => onChange(e, setPassword)}\r\n                        value={password}\r\n                    />\r\n\r\n                    <button className=\"mt-6 w-md transition rounded duration-300 ease-in-out text-xl text-extrabold uppercase bg-primary hover:bg-primary-dark py-2 px-4 text-gray-100\">Sign In </button>\r\n                </form>\r\n            </main>\r\n        </div>\r\n    );\r\n}","import {useState, useEffect} from 'react';\r\nimport {useNavigate} from 'react-router';\r\n\r\nimport {useUserContext} from 'context/UserContext';\r\nimport {get as getPost, getFavorites} from 'services/post';\r\nimport {useFavorites} from 'hooks';\r\n\r\nimport Banner from 'components/Banner';\r\nimport Post from 'components/Post';\r\n\r\nexport default function User() {\r\n  const navigate = useNavigate();\r\n\r\n  const {user} = useUserContext();\r\n\r\n  const favorites = useFavorites();\r\n  const [posts, setPosts] = useState(null);\r\n\r\n  useEffect(\r\n    _ => {\r\n      if (favorites && favorites !== 'loading' && !posts) {\r\n        setPosts([]);\r\n\r\n        favorites.forEach((postID, i) => {\r\n          void !async _ => {\r\n            setPosts((posts) => {\r\n              const newPosts = [...posts];\r\n              newPosts[i] = 'loading';\r\n              return newPosts;\r\n            });\r\n            try {\r\n              const post = await getPost(postID);\r\n              \r\n              // TODO: Check if component still mounted.\r\n              setPosts((posts) => {\r\n                const newPosts = [...posts];\r\n                newPosts[i] = post;\r\n                return newPosts;\r\n              });\r\n            }\r\n            catch (e) {}\r\n          }();\r\n        });\r\n      }\r\n    },\r\n    [favorites, posts]\r\n  );\r\n\r\n  return (\r\n    <section className=\"justify-around items-center min-h-screen bg-gray-300\">\r\n      <Banner name={user.username}/>\r\n      <h3 className=\"text-xl m-8 bold\">My Favorites</h3>\r\n      <div className=\"grid grid-cols-3 gap-4 m-8\">\r\n        {\r\n          posts?.map(\r\n            (post) => <Post key={post._id} {...{post}} useLink={true}/>\r\n          )\r\n        }\r\n      </div>\r\n    </section>\r\n  );\r\n}","export default function NotFound() {\r\n  return (\r\n    <p>Not Found</p>\r\n  );\r\n}","import {Fragment, useState, useEffect} from \"react\";\r\nimport {useParams, useNavigate} from \"react-router-dom\";\r\nimport merge from 'lodash/merge';\r\n\r\nimport * as PostService from 'services/post';\r\n\r\nimport Loading from 'pages/Loading';\r\nimport Banner from 'components/Banner';\r\nimport Post from 'components/Post';\r\n\r\nexport default function PostPage() {\r\n    const {id} = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    const [post, setPost] = useState(null);\r\n    const updatePost = (_, update) => {\r\n      if (typeof update === 'object') {\r\n        const updateObj = update;\r\n        update = (draft) => merge(draft, updateObj);\r\n      }\r\n      else if (typeof update !== 'function') {\r\n        throw new Error('Expected update function or object');\r\n      }\r\n      \r\n      return setPost(update);\r\n    };\r\n\r\n    useEffect(\r\n      _ => {\r\n        if (!id || post) { return; }\r\n\r\n        setPost('loading');\r\n\r\n        // The !_ => {}() pattern lets a function be defined and called at the same time\r\n        // Since the above pattern is an expression and not a statement, according to react/whatever library, and it gets upset at standalone\r\n        // expressions, you need to void the expression which is a statement\r\n        void !async _ => {\r\n          try {\r\n            const post = await PostService.get(id);\r\n            // TODO: Check if component still mounted\r\n            setPost(post);\r\n          }\r\n          catch (e) {\r\n            navigate('/404');\r\n          }\r\n        }();\r\n      },\r\n      [navigate, post, id]\r\n    );\r\n    \r\n    if (!post || post === 'loading') {\r\n      return (<Loading/>);\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <Banner/>\r\n        <div className=\"mt-8\">\r\n          <Post {...{post, updatePost}} className=\"m-auto\" style={{maxWidth: '400px'}}/>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n}","import {useEffect, useReducer} from 'react';\r\nimport {useLocation, useNavigate} from 'react-router';\r\nimport produce from 'immer';\r\nimport merge from 'lodash/merge';\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n\r\nimport {getOwned} from 'services/post';\r\n\r\nimport Loading from 'components/Loading';\r\nimport Banner from 'components/Banner';\r\nimport Post from 'components/Post';\r\nimport Pagination from 'components/Pagination';\r\n\r\nexport default function OwnedPosts() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const queryStrings = Object.fromEntries(location.search.slice(1).split('&').map((x) => x.split('=')));\r\n  const [postsState, dispatchPostsAction] = useReducer(\r\n    postsReducer,\r\n    {\r\n      load: queryStrings.page && parseInt(queryStrings.page) ? parseInt(queryStrings.page) - 1 : 0\r\n    }\r\n  );\r\n\r\n  const updatePost = (id, update) => {\r\n    if (typeof update === 'object') {\r\n      const updateObj = update;\r\n      update = (draft) => merge(draft, updateObj);\r\n    }\r\n    else if (typeof update !== 'function') {\r\n      throw new Error('Expected update function or object');\r\n    }\r\n\r\n    return dispatchPostsAction({type: 'update-post', payload: {id, update}});\r\n  };\r\n\r\n  useEffect(\r\n    _ => {\r\n      if (postsState && postsState !== 'loading' && 'load' in postsState) {\r\n        dispatchPostsAction({type: 'loading'});\r\n\r\n        void !async _ => {\r\n          dispatchPostsAction({type: 'load', payload: await getOwned(postsState.load)});\r\n        }();\r\n\r\n        return;\r\n      }\r\n\r\n      if (postsState) { return; }\r\n\r\n      dispatchPostsAction({type: 'loading'});\r\n      \r\n      // The !_ => {}() pattern lets a function be defined and called at the same time\r\n      // Since the above pattern is an expression and not a statement, according to react/whatever library, and it gets upset at standalone\r\n      // expressions, you need to void the expression which is a statement\r\n      void !async _ => {\r\n        try {\r\n          dispatchPostsAction({type: 'load', payload: await getOwned()});\r\n        }\r\n        catch (e) {\r\n          // handle your error here;\r\n          dispatchPostsAction({type: 'error', payload: e});\r\n        }\r\n      }();\r\n    },\r\n    [postsState]\r\n  );\r\n\r\n  if (postsState && postsState !== 'loading' && 'error' in postsState) {\r\n    // Placeholder\r\n    return 'error';\r\n  }\r\n\r\n  return (\r\n    <section className=\"justify-around items-center min-h-screen bg-gray-300\">\r\n      <Banner name=\"My Posts\"/>\r\n      {\r\n        postsState && postsState !== 'loading'\r\n        ?\r\n        <Pagination\r\n          data={postsState}\r\n          setPage={(i) => {\r\n            navigate(`/my-posts?page=${i+1}`);\r\n            dispatchPostsAction({type: 'page', payload: {i}});\r\n          }}\r\n          >\r\n          <Posts {...{updatePost}}/>\r\n        </Pagination>\r\n        :\r\n        <Loading/>\r\n      }\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction Posts(props) {\r\n  const {elements: posts, updatePost} = props;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-3 gap-4 p-8\">\r\n      {\r\n        posts?.map(\r\n          (post) => <Post key={post._id} {...{post, updatePost}} useLink={true}/>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction postsReducer(state, action) {\r\n  const {type, payload} = action;\r\n\r\n  if (type === 'load') {\r\n    const {data: values, limit, page, pages} = payload;\r\n    return {values, limit, page, pages};\r\n  }\r\n  else if (type === 'loading') {\r\n    return 'loading';\r\n  }\r\n  else if (type === 'error') {\r\n    return {error: payload};\r\n  }\r\n  else if (type === 'page') {\r\n    return {load: payload.i};\r\n  }\r\n  else if (type === 'update-post') {\r\n    if ('posts' in state && ['id', 'update'].every((key) => key in payload)) {\r\n      return produce(\r\n        state,\r\n        (draft) => {\r\n          const postI = draft.posts.findIndex((post) => post._id === payload.id);\r\n          if (postI !== -1) {\r\n            draft.posts[postI] = payload.update(draft.posts[postI]);\r\n            console.log(1, postI, cloneDeep(draft.posts));\r\n          }\r\n          else {\r\n            process.env.NODE_ENV === 'development' && console.warn('No post was found to update.');\r\n          }\r\n        }\r\n      );\r\n    }\r\n    else {\r\n      process.env.NODE_ENV === 'development' && console.warn('Error: Your update did not go through.');\r\n    }\r\n    return state;\r\n  }\r\n  else { return state; }\r\n}","import {useState} from 'react';\r\nimport {useUserContext} from \"../../context/UserContext\";\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nimport {create} from 'services/post';\r\n\r\nimport Banner from 'components/Banner';\r\n\r\nexport default function CreatePost(props) {\r\n    const {logout} = useUserContext()\r\n    const navigate = useNavigate()\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [image, setImage] = useState('');\r\n\r\n    const [errors, setErrors] = useState(null);\r\n\r\n    const logoutHandler = () => {\r\n        logout();\r\n        navigate(\"/login\");\r\n      }\r\n\r\n    const onSubmit = async (event) => {\r\n        // <form/>s by default have submit actions. Stop this.\r\n        event.preventDefault();\r\n\r\n        // Reset errors upon submit\r\n        setErrors(null);\r\n\r\n        try {\r\n            await create(title, description, image);\r\n            \r\n            navigate('/my-posts');\r\n            return;\r\n        }\r\n        catch (e) {\r\n            // Initialize object and arrays\r\n            setErrors(defaultErrors);\r\n\r\n            if (!e.cause) {\r\n                console.error(e);\r\n                return;\r\n            }\r\n\r\n            // Add each error to the error list\r\n            e.cause.errors.forEach((error) => {\r\n                if (error.startsWith('Title')) {\r\n                    setErrors((current) => ({...current, title: [...current.title, error]}));\r\n                }\r\n                else if (error.startsWith('Description')) {\r\n                    setErrors((current) => ({...current, description: [...current.description, error]}));\r\n                }\r\n                else if (error.startsWith('Image')) {\r\n                    setErrors((current) => ({...current, image: [...current.image, error]}));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n  return (\r\n    <section className=\"justify-center items-center min-h-screen bg-gray-300\">\r\n      <Banner name=\"Create Post\"/>\r\n      <div className=\"flex border-4 border-additional rounded rounded-xl bg-white mx-auto my-20 w-96 h-96 justify-center items-center\">\r\n        <form {...{onSubmit}} className=\"flex flex-col w-full mx-2 items-center\">\r\n          <h2 className=\"uppercase text-primary font-medium font-roboto font-black text-4xl mb-4\">Create post</h2>\r\n          <div>\r\n            <input type=\"text\" placeholder=\"Title\" value={title} onChange={(event) => { setTitle(event.target.value); }}\r\n            className=\"font-medium border-2 border-gray-700 w-72 text-yellow-500 focus:outline-none focus:ring p-2 rounded\"/>\r\n            <span>{errors?.title.map((error, i) => <div key={i}>{error}</div>)}</span>\r\n          </div>\r\n          <div>\r\n            <textarea placeholder=\"Description\" value={description} onChange={(event) => { setDescription(event.target.value); }}\r\n            className=\"font-medium border-2 border-gray-700 w-72 text-yellow-500 focus:outline-none focus:ring p-2 rounded mt-1.5\"/>\r\n            <span>{errors?.description.map((error, i) => <div key={i}>{error}</div>)}</span>\r\n          </div>\r\n          <div>\r\n            <input type=\"text\" placeholder=\"Enter an image URL\" value={image} onChange={(event) => { setImage(event.target.value); }}\r\n            className=\"font-medium border-2 border-gray-700 w-72 text-yellow-500 focus:outline-none focus:ring p-2 rounded\"/>\r\n            <span>{errors?.image.map((error, i) => <div key={i}>{error}</div>)}</span>\r\n          </div>\r\n          <button type=\"submit\"\r\n          className=\"mt-6 w-sm transition rounded duration-300 ease-in-out text-xl text-extrabold uppercase bg-primary hover:bg-primary-dark py-2 px-4 text-gray-100\" >Create</button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nconst defaultErrors = _ => ({\r\n    title: [],\r\n    description: [],\r\n    image: [],\r\n});","import { Navigate } from 'react-router-dom';\r\n\r\nimport {isSuperset} from 'utils';\r\nimport {useUserContext} from 'context/UserContext';\r\n\r\nimport Loading from 'pages/Loading';\r\n\r\nexport default function PrivateRoute(props) {\r\n  const {permissions, children} = props;\r\n  const {token, user, permissions: userPermissions} = useUserContext();\r\n\r\n  if ([token, user].some((x) => x === 'loading')) { return <Loading/>; }\r\n\r\n  if (!token || !user) {\r\n    return <Navigate replace to=\"/login\"/>;\r\n  }\r\n  \r\n  // Permissions are not matched by the role\r\n  if (permissions && !isSuperset(userPermissions, permissions)) {\r\n    return <Navigate replace to=\"/404\"/>;\r\n  }\r\n  \r\n  return children;\r\n}","import { Navigate } from 'react-router-dom';\r\n\r\nimport { useUserContext } from 'context/UserContext';\r\n\r\nimport Loading from 'pages/Loading';\r\n\r\nexport default function PublicRoute({children}) {\r\n  const {token, user} = useUserContext();\r\n\r\n  if (token) {\r\n    if (!user || user === 'loading') { return <Loading/>; }\r\n    return <Navigate replace to=\"/dashboard\"/>;\r\n  }\r\n\r\n  return children;\r\n}\r\n","import Dashboard from \"./pages/Dashboard\";\r\nimport Login from \"./pages/Login/Login\";\r\nimport User from \"./pages/User/User\";\r\nimport NotFound from \"./pages/NotFound/NotFound\";\r\nimport Post from \"./pages/Post/Post\";\r\nimport OwnedPosts from \"./pages/Post/OwnedPosts\";\r\nimport CreatePost from \"./pages/Post/CreatePost\";\r\nimport \"./index.css\";\r\n\r\nimport Private from \"./routes/PrivateRoute\";\r\nimport Public from \"./routes/PublicRoute\";\r\n\r\nimport { HashRouter, Routes, Route, Navigate } from \"react-router-dom\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <HashRouter>\r\n      <Routes>\r\n        <Route exact path=\"/\" element={<Public><Navigate to=\"/login\"/></Public>}/>\r\n        <Route exact path=\"/login\" element={<Public><Login/></Public>}/>\r\n\r\n        <Route exact path=\"/dashboard\" element={<Private><Dashboard/></Private>}/>\r\n        <Route exact path=\"/user\" element={<Private><User/></Private>}/>\r\n        <Route exact path=\"/post/:id\" element={<Private permissions={permissions.post}><Post/></Private>}/>\r\n        <Route exact path=\"/my-posts\" element={<Private permissions={permissions.myPosts}><OwnedPosts/></Private>}/>\r\n        \r\n        <Route exact path=\"/create-post\" element={<Private permissions={permissions.createPost}><CreatePost/></Private>}/>\r\n\r\n        <Route path=\"*\" element={<NotFound/>}/>\r\n      </Routes>\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nconst permissions = {\r\n  post: new Set(['post:read']),\r\n  myPosts: new Set(['post:read', 'post:update']),\r\n  createPost: new Set(['post:create']),\r\n  admin: new Set(['admin:read']),\r\n}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { UserProvider } from \"./context/UserContext\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <>\r\n      <UserProvider>\r\n        <App />\r\n      </UserProvider>\r\n    </>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}